<div class="container-xxl mt-3">
  <div *ngIf="_isGroupCreated">
    
    <div *ngIf="_isGroupCreated">

      <div class="flex-e mt-2">
        <button *ngIf="_isLocked && !_showGroupMatches" class="btn btn-outlined-combine flex-vc flex-hc w-auto gap-3"
          (click)="showMatches()">
          Group Matches
        </button>
        <button *ngIf="_isLocked && _showGroupMatches" class="btn btn-outlined-combine flex-vc flex-hc w-auto gap-3"
          (click)="showGroups()">
          View Groups
        </button>
      </div>
      <div class="flex-e my-2" *ngIf="_groupList.length > 0 " >
        <button class="profile_buttons2" ngxPrint printSectionId="print-sections" [useExistingCss]="true">
          Print
        </button>
      </div>
      <section class="bottom">
        <div class="bottomBar" id="print-sections">

          <div *ngIf="_isLocked && !_showGroupMatches" class="row grpMatchTable">
            <div class="col-lg-6 mt-2" *ngFor="let item of _groupList; let i = index">
              <h6 class="mb-2">{{item.label}}</h6>
              <p-table styleClass="p-datatable-gridlines p-datatable-sm" class="common-table text-center" #request
                [rows]="7" [value]="item.group_details" [paginator]="false" [tableStyle]="{ 'min-width': '25rem' }"
                [globalFilterFields]="['name', 'email']">

                <ng-template pTemplate="header">
                  <tr style="font-size: 11px;">
                    <th pSortableColumn="name" style="width: 3%">S.No</th>
                    <th pSortableColumn="email" style="width: 5%">Player</th>
                    <th pSortableColumn="email" style="width: 3%">Points</th>

                    <th pSortableColumn="state" style="width: 3%">Position</th>
                    <th pSortableColumn="club" style="width: 5%">Qualifier</th>
                  </tr>
                </ng-template>

                <ng-template pTemplate="body" let-users>
                  <tr>
                    <td><b>{{ users.position}}</b></td>
                    <td class="text-overflow"><b>{{ users.participant_name}}</b></td>
                    <td><b>{{ (users.points === null || users.points === -1) ? 0 : users.points }}</b></td>
                    <td><b>{{ users.rank}}</b></td>
                    <td *ngIf="users.winner"><b>Q{{ users.rank }}</b></td>
                    <td *ngIf="!users.winner"><b></b></td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td colspan="8">No user found.</td>
                  </tr>
                </ng-template>
              </p-table>
            </div>

          </div>

          <br>
          <div *ngIf="_isLocked && _showGroupMatches" class="grpMatchTable bigGrpTable">
            <div class="col-lg-8 mt-3" *ngFor="let item of _matchDetailsList; let i = index">
              <h6 class="mb-2">{{'Group-'+ (i+1)}}</h6>
              <p-table styleClass="p-datatable-gridlines p-datatable-sm" class="common-table text-center" #request
                [rows]="7" [value]="item.group_match_details" [paginator]="false"
                [tableStyle]="{ 'width': 'max-content' }" [globalFilterFields]="['name', 'email']">

                <ng-template pTemplate="header">
                  <tr style="font-size: 11px;">
                    <th pSortableColumn="name" style="width: 60px">Match</th>
                    <th pSortableColumn="email" style="width: 100px">Date</th>
                    <th pSortableColumn="email" style="width: 80px">Time</th>
                    <th pSortableColumn="state" style="width: 60px">Table</th>
                    <th pSortableColumn="club" style="width: 120px">Umpire</th>
                    <th pSortableColumn="state" style="width: 300px">Players</th>
                    <th pSortableColumn="club" style="width: 60px">Score</th>
                  </tr>
                </ng-template>

                <ng-template pTemplate="body" let-users>
                  <tr>
                    <td><b>{{ users.match}}</b></td>
                    <td class="text-overflow"><b>{{ users.start_time | date:'yyyy-MM-dd'}}</b></td>
                    <td><b>{{ users.start_time | date:'HH:mm'}}</b></td>
                    <td><b>{{ users.table}}</b></td>
                    <td style="max-width: 120px"><b class="text-overflow">{{ users.umpire_name}}</b></td>
                    <td style="max-width: 300px"><b class="text-overflow">{{ users.match_details[0].participant_name +'
                        ' +
                        'vs' + ' ' +
                        users.match_details[1].participant_name}}</b></td>
                    <td>
                      <div class="flex-vc gap-3">

                        <div *ngIf="!isWinner(users)">{{users.score}}</div>

                      </div>
                    </td>
                  </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                  <tr>
                    <td colspan="8">No user found.</td>
                  </tr>
                </ng-template>
              </p-table>
            </div>


          </div>
        </div>
      </section>
    </div>
    


  </div>
</div>